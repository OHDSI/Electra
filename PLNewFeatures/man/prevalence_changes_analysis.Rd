% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/prevalence_changes_analysis.R
\name{prevalence_changes_analysis}
\alias{prevalence_changes_analysis}
\title{Run prevalence changes analysis for a cohort and save results to PostgreSQL}
\usage{
prevalence_changes_analysis(
  cohort_id,
  scratch.table,
  cdm_schema,
  concept_sets,
  conn,
  postgres_conn,
  database_id,
  server,
  drivers_dir,
  progress = NULL,
  schema_name = "phenotype_library"
)
}
\arguments{
\item{cohort_id}{cohort identifier to analyze}

\item{scratch.table}{space and table where the cohort is available}

\item{cdm_schema}{general database cdm schema}

\item{concept_sets}{data frame containing concept sets information}

\item{conn}{database connection for querying data}

\item{postgres_conn}{PostgreSQL connection for saving results}

\item{database_id}{database identifier for the analysis}

\item{server}{server name for logging}

\item{drivers_dir}{directory containing database drivers}

\item{progress}{progress object for UI updates (optional)}

\item{schema_name}{PostgreSQL schema name (default: "phenotype_library")}
}
\value{
data.table with prevalence changes analysis results
}
\description{
This function runs the prevalence changes analysis for a given
cohort and saves the results to PostgreSQL database. This function is designed
to be called during cohort evaluation to populate the database with prevalence
changes analysis results.
}
\details{
\subsection{Required packages}{
\itemize{
\item data.table
\item DBI
\item PLNewFeatures
}
}

\subsection{Functions Called}{
\itemize{
\item prevalence_changes: Main prevalence changes analysis function
}
}

\subsection{PostgreSQL Tables Created/Updated}{
\itemize{
\item prevalence_changes: Prevalence changes analysis results
}
}
}
\examples{
\dontrun{
# Run prevalence changes analysis for a cohort
results <- prevalence_changes_analysis(
  cohort_id = 123,
  scratch.table = "scratch.cohort_table",
  cdm_schema = "cdm_schema",
  concept_sets = concept_sets_df,
  conn = redshift_conn,
  postgres_conn = postgres_conn,
  database_id = "optum_ehr",
  server = "server_name",
  drivers_dir = "drivers",
  progress = progress_obj
)
}

}
\seealso{
Other prevalence_changes_analysis: 
\code{\link{get_prevalence_changes_analysis_output_table_names}()},
\code{\link{read_prevalence_changes}()},
\code{\link{read_prevalence_changes_formatted}()}
}
\author{
Luisa MartÃ­nez (08APR2025)
}
\concept{prevalence_changes_analysis}
